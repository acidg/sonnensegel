[env:esp12e]
platform = espressif8266
board = esp12e
framework = arduino

; Serial Monitor options
monitor_speed = 115200
monitor_filters =
    default
    time
    esp8266_exception_decoder

; Build options
build_flags =
    -D PIO_FRAMEWORK_ARDUINO_LWIP2_LOW_MEMORY
    -D BEARSSL_SSL_BASIC
    -D MQTT_MAX_PACKET_SIZE=256
    -D ARDUINOJSON_USE_LONG_LONG=0
    -D ARDUINOJSON_DECODE_UNICODE=0
    -Os
    -ffunction-sections
    -fdata-sections
    -Wl,--gc-sections

; Library dependencies
lib_deps =
    PubSubClient@^2.8
    ArduinoJson@^6.21.3
    ESP8266WebServer

; Upload options
upload_speed = 115200
upload_resetmethod = nodemcu

; Native test environment for unit tests
[env:native]
platform = native
build_flags =
    -D UNIT_TEST
    -std=c++17
build_src_filter =
    -<*>
lib_deps =
test_ignore = test_embedded
test_filter = test_*

